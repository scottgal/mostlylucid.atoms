<Project Sdk="Microsoft.NET.Sdk">

    <PropertyGroup>
        <TargetFrameworks>net6.0;net7.0;net8.0;net9.0;net10.0</TargetFrameworks>
        <LangVersion>latest</LangVersion>
        <ImplicitUsings>enable</ImplicitUsings>
        <Nullable>enable</Nullable>

        <!-- NuGet Package Metadata -->
        <PackageId>mostlylucid.ephemeral.complete</PackageId>
        <Authors>Scott Galloway</Authors>
        <Description>Complete bundle of all Mostlylucid.Ephemeral functionality in a single DLL - bounded async execution with signals, atoms, and patterns. No additional package dependencies required.</Description>
        <PackageTags>async;parallel;concurrency;observability;signals;coordination;complete;bundle</PackageTags>
        <PackageLicenseExpression>Unlicense</PackageLicenseExpression>
        <PackageReadmeFile>README.md</PackageReadmeFile>
        <PackageIcon>icon.png</PackageIcon>
        <PackageReleaseNotes>$([System.IO.File]::ReadAllText("$(MSBuildProjectDirectory)/ReleaseNotes.txt"))</PackageReleaseNotes>
        <RepositoryUrl>https://github.com/scottgal/mostlylucid.atoms</RepositoryUrl>
        <GeneratePackageOnBuild>true</GeneratePackageOnBuild>
    </PropertyGroup>

    <!-- Core source files -->
    <ItemGroup>
        <Compile Include="..\mostlylucid.ephemeral\**\*.cs" Link="Core\%(RecursiveDir)%(Filename)%(Extension)"/>
    </ItemGroup>

    <ItemGroup>
        <Compile Include="..\mostlylucid.ephemeral.logging\*.cs" Link="Logging\%(Filename)%(Extension)"/>
    </ItemGroup>

    <ItemGroup>
        <Compile Include="..\mostlylucid.ephemeral.attributes\**\*.cs" Link="Attributes\%(RecursiveDir)%(Filename)%(Extension)"/>
        <Compile Remove="..\mostlylucid.ephemeral.attributes\bin\**\*.cs"/>
        <Compile Remove="..\mostlylucid.ephemeral.attributes\obj\**\*.cs"/>
    </ItemGroup>

    <ItemGroup>
        <Compile Remove="..\mostlylucid.ephemeral\bin\**\*.cs"/>
        <Compile Remove="..\mostlylucid.ephemeral\obj\**\*.cs"/>
    </ItemGroup>

    <!-- Atom source files -->
    <ItemGroup>
        <Compile Include="..\mostlylucid.ephemeral.atoms.batching\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.echo\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.fixedwork\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.imagesharp\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.keyedsequential\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.molecules\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.priorityprocessor\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.ratelimit\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.retry\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.scheduledtasks\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.signalaware\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.slidingcache\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.volatile\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.windowsize\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.waveorchestrator\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.entropyanalysis\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.timeseriesanomaly\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.burstdetection\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.smtp\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.razortemplate\*.cs" Link="Atoms\%(Filename)%(Extension)"/>
    </ItemGroup>

    <!-- Data Atom source files -->
    <ItemGroup>
        <Compile Include="..\mostlylucid.ephemeral.atoms.data\*.cs" Link="Atoms\Data\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.data.file\*.cs" Link="Atoms\Data\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.data.postgres\*.cs" Link="Atoms\Data\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.atoms.data.sqlite\*.cs" Link="Atoms\Data\%(Filename)%(Extension)"/>
    </ItemGroup>

    <!-- SQLite Single Writer -->
    <ItemGroup>
        <Compile Include="..\mostlylucid.ephemeral.sqlite.singlewriter\*.cs" Link="SQLite\%(Filename)%(Extension)"/>
    </ItemGroup>

    <!-- Pattern source files -->
    <ItemGroup>
        <Compile Include="..\mostlylucid.ephemeral.patterns.adaptiverate\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.anomalydetector\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.backpressure\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.circuitbreaker\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.controlledfanout\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.dynamicconcurrency\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.keyedpriorityfanout\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.longwindowdemo\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.reactivefanout\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.signalcoordinatedreads\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.signalinghttp\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.signallogwatcher\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.signalreactionshowcase\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.telemetry\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
        <Compile Include="..\mostlylucid.ephemeral.patterns.persistentwindow\*.cs" Link="Patterns\%(Filename)%(Extension)"/>
    </ItemGroup>

    <!-- Package dependencies -->
    <ItemGroup>
        <PackageReference Include="Microsoft.Extensions.DependencyInjection.Abstractions" Version="8.0.0"/>
        <PackageReference Include="Microsoft.Extensions.Logging.Abstractions" Version="8.0.0"/>
        <PackageReference Include="System.IO.Hashing" Version="8.0.0"/>
        <PackageReference Include="Microsoft.Data.Sqlite" Version="8.0.0"/>
        <PackageReference Include="Npgsql" Version="8.0.0"/>
        <PackageReference Include="System.Threading.RateLimiting" Version="8.0.0"/>
        <PackageReference Include="Cronos" Version="0.11.1"/>
        <PackageReference Include="SixLabors.ImageSharp" Version="3.1.12" />
        <PackageReference Include="SixLabors.ImageSharp.Drawing" Version="2.1.5"/>
        <PackageReference Include="MailKit" Version="4.9.0"/>
        <PackageReference Include="RazorLight" Version="2.3.1"/>
    </ItemGroup>

    <ItemGroup>
        <None Include="README.md" Pack="true" PackagePath="\"/>
        <None Include="icon.png" Pack="true" PackagePath="\"/>
    </ItemGroup>

</Project>
